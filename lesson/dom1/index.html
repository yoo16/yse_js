<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="../css/bootstrap/bootstrap.min.css">
  <link rel="stylesheet" href="../css/prism.css">
  <link rel="stylesheet" href="../css/default.css">

  <title>DOM 1</title>
</head>

<body>
  <div id="content" class="container">
    <p><a href="../index.html">Back</a></p>
    <h1 class="h1">DOM 1</h1>

    <h2 class="h2">DOM, Node, Element</h2>
    <div id="dom">
      <pre class="language-markup"><code>
      DOM
      |- Node
          |- Text(Document)
          |- Element-- HTMLElement
                    |- SVGElement
      </code></pre>
      <h3 class="h3">DOM</h3>
      <ul class="list-group">
        <li class="list-group-item">HTMLとJavaScriptをつなぐAPI</li>
        <li class="list-group-item">DOMツリー(ツリー状の集合）</li>
      </ul>

      <h3 class="h3">Node</h3>
      <ul class="list-group">
        <li class="list-group-item">DOMツリーを操作するオブジェクト</li>
        <li class="list-group-item">body, input, div ... などをオブジェクトとして操作</li>
      </ul>

      <h3 class="h3">Element</h3>
      <ul class="list-group">
        <li class="list-group-item">親である Node からプロパティを継承したもの</li>
        <li class="list-group-item">style、attribute、width、height etc...</li>
      </ul>
    </div>

    <div id="document">
      <h2 class="h2"> document オブジェクト</h2>
      <p class="">
        documentオブジェクトで、WebページのHTML要素(Element）にプログラムでアクセスできる
      </p>
    </div>

    <div id="query_selector">
      <h2 class="h2"> document.querySelector()</h2>
      <p class="">
        指定したセレクタの最初の Element を取得
      </p>
      <pre class="language-javascript"><code>
      document.querySelector('要素')
      </code></pre>
    </div>

    <div id="query_selector_all">
      <h2 class="h2"> document.querySelectorAll()</h2>
      <p class="">
        指定したセレクタの全ての Element を取得
      </p>
      <pre class="language-javascript"><code>
        document.querySelectorAll('要素')
      </code></pre>

      <h4 class="h4">memo</h4>
      <p class="">
        querySelectorAll() はHTML内の全ての input を全て取得してしまうため、誤動作の原因となる場合がある。<br>
        親要素やプロパティなどを使ってセレクタをしてみる。
      </p>

      <h3 class="h3">id と 親子要素を指定する方法</h3>
      <pre class="language-javascript"><code>
      document.querySelectorAll('#親要素のID > 子要素')
      </code></pre>

      <h3 class="h3">プロパティを指定する方法</h3>
      <pre class="language-javascript"><code>
        document.querySelectorAll('要素[プロパティ名=プロパティ値]')
      </code></pre>
    </div>

    <div id="foreach_value">
      <h2 class="h2">forEach</h2>
      <p class="alert alert-info">
        querySelectorAll() で取得した要素を、forEach でループする<br>
        また、各 input の値を設定する場合、value プロパティを利用する
      </p>
      <pre class="language-javascript"><code>
      要素の集合.forEach(function(要素) {
      }
      </code></pre>

      <h4 class="h4">memo</h4>
      <p class="alert alert-danger">
        querySelectorAll() の戻り値は、Array でなく NodeList 型であることに注意
      </p>

    </div>

    <div id="get_element_by_id">
      <h2 class="h2"> document.getElementById()</h2>
      <p class="">
        指定したIDの要素を取得
        <br>
        id はHTML内でユニークであること
      </p>
      <pre class="language-javascript"><code>
        document.getElementById('ID名');
      </code></pre>
    </div>

    <div id="get_elements_by_class_name">
      <h2 class="h2"> document.getElementsByClassName()</h2>
      <p class="">
        指定した class の要素を取得
      </p>
      <pre class="language-javascript"><code>
      document.getElementsByClassName('Class名');
      </code></pre>

      <h4 class="h4">memo</h4>
      <p class="alert alert-danger">
        querySelectorAll() の戻り値は、Array でなく HTMLCollection 型であることに注意<br>
        HTMLCollection をそのままforEach できないので、querySelectorAll() を利用したほうがよい場合がある。
      </p>
    </div>

    <div id="get_element_by_name">
      <h2 class="h2">document.getElementsByName()</h2>
      <p class="">
        指定した name の NodeList コレクションを取得
      </p>
      <pre class="language-javascript"><code>
      document.getElementsByName('要素の名前');
      </code></pre>
    </div>

    <div>
      <h2 class="h2">練習</h2>
      <p>
        DOMの内容を console.log() で確認したり、操作してみよう
      </p>
      <h3 class="h3">HTML</h3>
      <script type="text/plain" class="language-markup">
    <h2 id="title">アイテム</h2>
    <div id="item_code">
      <input type="text" name="code">
      <input type="text" name="code">
      <input type="text" name="code">
    </div>
    <div id="item_list">
      <input type="text" name="city_name">
      <input type="text" name="city_name">
      <input type="text" name="city_name">
    </div>
    <div>
      <ul id="city_list">
        <li class="city_name">Tokyo</li>
        <li class="city_name">Osaka</li>
        <li class="city_name">Yokohama</li>
      </ul>
    </div>
    </script>
    </div>

    <div>
      <h3 class="h3">querySelector()</h3>
      <p>最初の input を選択</p>
      <pre class="language-javascript"><code>
      let first_input = document.querySelector('input');
      </code></pre>

      <h3 class="h3">querySelectorAll()</h3>
      <p>全ての input を選択</p>
      <pre class="language-javascript"><code>
      let all_input = document.querySelectorAll('input');
      </code></pre>

      <h3 class="h3">親子要素</h3>
      <p>id=item_list の子要素 input を全て選択</p>
      <pre class="language-javascript"><code>
      let item_list_selector = document.querySelectorAll('#item_list > input');
      </code></pre>

      <h3 class="h3">id 指定</h3>
      <p>id=title を指定する</p>

      <h4 class="h4">querySelector()</h4>
      <pre class="language-javascript"><code>
      let title_selector = document.querySelector('#title')
      </code></pre>

      <h4 class="h4">getElementById()</h4>
      <pre class="language-javascript"><code>
      let title_element = document.getElementById('title');
      </code></pre>

      <h3 class="h3">テキスト、HTMLの取得</h3>
      <h4 class="h4">innerHTML</h4>
      <pre class="language-javascript"><code>
      title_selector.innerText;
      </code></pre>

      <h4 class="h4">innerHTML</h4>
      <pre class="language-javascript"><code>
      title_selector.innerHTML;
      </code></pre>

      <h3 class="h3">class 指定</h3>
      <p>class=city_name を選択する</p>

      <h4 class="h4">querySelector()</h4>
      <pre class="language-javascript"><code>
      let city_name_class_selector = document.querySelectorAll('.city_name');
      </code></pre>

      <h4 class="h4">getElementsByClassName()</h4>
      <pre class="language-javascript"><code>
      let city_name_class_elements = document.getElementsByClassName('city_name');
      </code></pre>

      <h3 class="h3">name 指定</h3>
      <p>name=city_name を全て選択する</p>
      <h4 class="h4">querySelector()</h4>
      <pre class="language-javascript"><code>
      let city_name_selector = document.querySelectorAll('input[name=city_name]');
      </code></pre>

      <h4 class="h4">getElementsByName()</h4>
      <pre class="language-javascript"><code>
      let city_name_elements = document.getElementsByName('city_name');
      </code></pre>

      <h2 class="h2">forEach</h2>
      <h3 class="h3">HTML Collection をループ</h3>
      <p>Array に変更してから forEach</p>
      <pre class="language-javascript"><code>
      Array.from(city_name_elements).forEach(function(element) {
          //element を確認してみる
      })
      </code></pre>

      <h3 class="h3">NodeList をループ</h3>
      <p>そのまま forEach</p>
      <pre class="language-javascript"><code>
      city_name_class_selector.forEach(function(element) {
          //element を確認してみる
      })
      </code></pre>

    </div>

    <p><a href="../index.html">Back</a></p>
  </div>

  <script src="js/main.js"></script>

  <script src="../js/prism.js"></script>
</body>

</html>